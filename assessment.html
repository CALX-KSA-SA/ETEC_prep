<!DOCTYPE html>
<html lang="ar" dir="rtl" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CALX | تقييم الجاهزية المدرسية</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Tajawal', 'sans-serif'],
                        arabic: ['Tajawal', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            DEFAULT: '#008F68', // Emerald Green
                            50: '#ecfdf5',
                            100: '#d1fae5',
                            200: '#a7f3d0',
                            300: '#6ee7b7',
                            400: '#34d399',
                            500: '#10b981',
                            600: '#008F68',
                            700: '#047857',
                            800: '#065f46',
                            900: '#064e3b',
                        },
                        secondary: {
                            DEFAULT: '#1A3047', // Dark Navy
                            light: '#2D3748',
                            dark: '#111827',
                        }
                    }
                }
            }
        }
    </script>
    <!-- Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
            background-color: #F4F7F6;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f5f9;
        }

        ::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>
</head>

<body class="bg-[#F4F7F6] text-secondary">

    <!-- Header -->
    <header class="bg-white/90 backdrop-blur-md border-b border-gray-200 sticky top-0 z-50">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-4">
                <a href="index.html"
                    class="flex items-center gap-2 text-gray-500 hover:text-primary-600 transition-colors">
                    <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    <span class="hidden sm:inline">العودة للرئيسية</span>
                </a>
            </div>

            <div class="flex items-center gap-3">
                <span class="font-bold text-lg text-secondary">أداة تقييم الجاهزية</span>
                <div class="h-8 w-px bg-gray-200 mx-2"></div>
                <a href="index.html">
                    <img src="images/calx-logo-black2.png" alt="CALX Logo"
                        class="h-8 w-auto cursor-pointer hover:opacity-80 transition-opacity">
                </a>
                <a href="assessment-en.html"
                    class="mr-4 flex items-center gap-2 text-sm font-bold text-gray-600 hover:text-primary-600 font-sans border-r border-gray-300 pr-4">
                    <i data-lucide="globe" class="w-4 h-4"></i> English
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12 pb-32">
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Assessment Form -->
            <div class="flex-1 space-y-8">

                <!-- Intro -->
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-gray-100">
                    <h1 class="text-3xl font-black mb-4 text-secondary">اختبر جاهزية مدرستك للاعتماد</h1>
                    <p class="text-gray-600 leading-relaxed text-lg">
                        أجب على الـ 41 سؤالاً التالية بمصداقية لتقييم الوضع الحالي لمدرستك مقابل معايير الهيئة.
                        استخدم المقياس من 1 (منخفض) إلى 5 (مرتفع).
                    </p>
                </div>

                <!-- Section A: Governance -->
                <div class="section-container bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"
                    data-section="A">
                    <div class="bg-secondary p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center gap-3">
                            <span
                                class="w-8 h-8 rounded-lg bg-primary-600 flex items-center justify-center text-sm">A</span>
                            القيادة والحوكمة
                        </h2>
                        <span class="text-primary-400 text-sm font-mono score-badge" data-count="9">0/45</span>
                    </div>
                    <div class="divide-y divide-gray-100" id="section-a-questions"></div>
                </div>

                <!-- Section B: Teaching -->
                <div class="section-container bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"
                    data-section="B">
                    <div class="bg-secondary p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center gap-3">
                            <span
                                class="w-8 h-8 rounded-lg bg-primary-600 flex items-center justify-center text-sm">B</span>
                            التعليم والتعلم
                        </h2>
                        <span class="text-primary-400 text-sm font-mono score-badge" data-count="9">0/45</span>
                    </div>
                    <div class="divide-y divide-gray-100" id="section-b-questions"></div>
                </div>

                <!-- Section C: Outcomes -->
                <div class="section-container bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"
                    data-section="C">
                    <div class="bg-secondary p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center gap-3">
                            <span
                                class="w-8 h-8 rounded-lg bg-primary-600 flex items-center justify-center text-sm">C</span>
                            نواتج التعلم
                        </h2>
                        <span class="text-primary-400 text-sm font-mono score-badge" data-count="6">0/30</span>
                    </div>
                    <div class="divide-y divide-gray-100" id="section-c-questions"></div>
                </div>

                <!-- Section D: Environment -->
                <div class="section-container bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"
                    data-section="D">
                    <div class="bg-secondary p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center gap-3">
                            <span
                                class="w-8 h-8 rounded-lg bg-primary-600 flex items-center justify-center text-sm">D</span>
                            البيئة المدرسية
                        </h2>
                        <span class="text-primary-400 text-sm font-mono score-badge" data-count="6">0/30</span>
                    </div>
                    <div class="divide-y divide-gray-100" id="section-d-questions"></div>
                </div>

                <!-- Section E: Engagement -->
                <div class="section-container bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"
                    data-section="E">
                    <div class="bg-secondary p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center gap-3">
                            <span
                                class="w-8 h-8 rounded-lg bg-primary-600 flex items-center justify-center text-sm">E</span>
                            المجتمع والمشاركة
                        </h2>
                        <span class="text-primary-400 text-sm font-mono score-badge" data-count="5">0/25</span>
                    </div>
                    <div class="divide-y divide-gray-100" id="section-e-questions"></div>
                </div>

                <!-- Section F: Improvement -->
                <div class="section-container bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden"
                    data-section="F">
                    <div class="bg-secondary p-6 text-white flex justify-between items-center">
                        <h2 class="text-xl font-bold flex items-center gap-3">
                            <span
                                class="w-8 h-8 rounded-lg bg-primary-600 flex items-center justify-center text-sm">F</span>
                            التحسين والاستدامة
                        </h2>
                        <span class="text-primary-400 text-sm font-mono score-badge" data-count="6">0/30</span>
                    </div>
                    <div class="divide-y divide-gray-100" id="section-f-questions"></div>
                </div>

            </div>

            <!-- Live Dashboard (Sidebar) -->
            <div class="w-full lg:w-96 shrink-0 order-first lg:order-last">
                <div class="sticky top-24 space-y-6">
                    <!-- Total Score Card -->
                    <div class="bg-secondary text-white p-6 rounded-2xl shadow-xl border border-gray-800">
                        <h3 class="text-lg font-bold text-gray-400 mb-2">نسبة الامتثال الكلية</h3>
                        <div class="flex items-end gap-2 mb-4">
                            <span class="text-5xl font-black text-primary-400" id="total-percent">0%</span>
                            <span class="text-sm text-gray-500 mb-2">/ 100%</span>
                        </div>
                        <!-- Progress Bar -->
                        <div class="w-full h-3 bg-gray-700 rounded-full overflow-hidden">
                            <div id="total-progress" class="h-full bg-primary-500 transition-all duration-700 w-0">
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-700 flex justify-between items-center">
                            <span class="text-sm text-gray-400">الحالة العامة:</span>
                            <span id="total-status"
                                class="px-3 py-1 bg-gray-800 rounded-full text-xs font-bold text-gray-500">
                                بانتظار الإدخال
                            </span>
                        </div>
                    </div>

                    <!-- Breakdown -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg border border-gray-100">
                        <h3 class="font-bold border-b border-gray-100 pb-4 mb-4">ملخص المجالات</h3>
                        <div class="space-y-4 text-sm">
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500">A. القيادة والحوكمة</span>
                                <span class="font-bold" id="score-A">0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500">B. التعليم والتعلم</span>
                                <span class="font-bold" id="score-B">0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500">C. نواتج التعلم</span>
                                <span class="font-bold" id="score-C">0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500">D. البيئة المدرسية</span>
                                <span class="font-bold" id="score-D">0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500">E. المجتمع والمشاركة</span>
                                <span class="font-bold" id="score-E">0%</span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-gray-500">F. التحسين المستمر</span>
                                <span class="font-bold" id="score-F">0%</span>
                            </div>
                        </div>

                        <button onclick="window.print()"
                            class="w-full mt-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold flex items-center justify-center gap-2 transition-colors">
                            <i data-lucide="printer" class="w-4 h-4"></i>
                            طباعة التقرير
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-slate-900 text-white py-12 border-t border-slate-800">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <!-- Logo -->
                <div class="flex flex-col items-center md:items-start gap-4">
                    <a href="https://calx.sa">
                        <img src="images/calx-logo-black2.png" alt="CALX Logo" class="h-8 w-auto opacity-90 invert"
                            loading="lazy">
                    </a>
                    <p class="text-slate-400 text-sm max-w-xs text-center md:text-right">
                        الشريك الاستراتيجي للاعتماد المدرسي والجاهزية المؤسسية
                    </p>
                </div>

                <!-- Contact Card -->
                <div class="bg-slate-800 p-6 rounded-xl border border-slate-700 flex items-center gap-4 min-w-[300px]">
                    <div
                        class="w-12 h-12 bg-emerald-600 rounded-full flex items-center justify-center text-white shrink-0">
                        <span class="font-bold text-lg">DS</span>
                    </div>
                    <div>
                        <h4 class="font-bold text-white">داني سيناي (Dani Sinai)</h4>
                        <p class="text-xs text-emerald-400 font-bold uppercase tracking-wider mb-1">رئيس قطاع الاستشارات
                            التعليمية</p>
                        <div class="text-sm text-slate-300 flex flex-col gap-1">
                            <a href="mailto:dsinai@calx.sa"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2 dir-ltr justify-end">
                                <i data-lucide="mail" class="w-3 h-3"></i> dsinai@calx.sa
                            </a>
                            <a href="tel:0599343529"
                                class="hover:text-emerald-400 transition-colors flex items-center gap-2 dir-ltr justify-end"
                                dir="ltr">
                                <i data-lucide="phone" class="w-3 h-3"></i> 059 934 3529
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-8 pt-8 border-t border-slate-800 text-center text-slate-500 text-xs">
                &copy; 2026 CALX. جميع الحقوق محفوظة.
            </div>
        </div>
    </footer>

    <!-- JS Logic -->
    <script>
        // Init Icons
        lucide.createIcons();

        // Questions Data (Section key mapped to domain questions) - 41 Questions Matching English Content
        const questionsData = {
            A: [
                "هل يوجد بالمدرسة فريق للتقويم الذاتي تم تشكيله وتدريبه واعتماد أعضائه؟",
                "هل قام مدير المدرسة وفريق القيادة بمراجعة إطار معايير هيئة تقويم التعليم والتدريب وفهمه وتطبيقه؟",
                "هل هياكل الحوكمة والأدوار والمسؤوليات محددة وموثقة بوضوح؟",
                "هل تم وضع مؤشرات أداء واستخدامها لمراقبة فاعلية المدرسة؟",
                "هل تتسم عمليات جمع البيانات وإعداد التقارير واتخاذ القرارات بالشفافية والمساءلة؟",
                "هل سياسات المدرسة متوافقة مع القيم الوطنية والأخلاقيات المهنية والمتطلبات التنظيمية؟",
                "هل تظهر المدرسة استقراراً مالياً واستدامة تشغيلية (حيثما ينطبق ذلك)؟",
                "هل تستخدم المدرسة منصة هيئة تقويم التعليم والتدريب الرسمية بدقة وانتظام؟",
                "هل يتم تنفيذ التقويم الذاتي كعملية مؤسسية رسمية وموثقة ومستمرة؟"
            ],
            B: [
                "هل تتوافق خطط دروس المعلمين مع معايير الهيئة ونواتج التعلم؟",
                "هل تتوافق ممارسات التقويم مع متطلبات الاعتماد وأهداف التعلم؟",
                "هل يتم تقديم تغذية راجعة للطلاب بانتظام واستخدامها لتحسين التعلم؟",
                "هل تُستخدم استراتيجيات تدريس متنوعة لتلبية احتياجات جميع المتعلمين، بما في ذلك الموهوبين وذوي الإعاقة؟",
                "هل يتم تطبيق التعلم النشط باستمرار عبر الفصول الدراسية؟",
                "هل يتضح دمج التعلم الرقمي والتعليم الإلكتروني في ممارسات التدريس؟",
                "هل يتم تعزيز مهارات التفكير العليا والإبداع وحل المشكلات بشكل مقصود؟",
                "هل تعزز ممارسات التدريس الهوية الوطنية والقيم والسلوك الإيجابي للطلاب؟",
                "هل إدارة الصف فعالة ومتسقة في جميع أنحاء المدرسة؟"
            ],
            C: [
                "هل تستخدم المدرسة اختبارات الهيئة الوطنية أو الاختبارات المعيارية المعتمدة لقياس نواتج التعلم؟",
                "هل يتم تحليل بيانات تحصيل الطلاب بانتظام لمراقبة التقدم والاتجاهات؟",
                "هل تظهر المدرسة تحسناً ملموساً في نواتج التعلم بمرور الوقت؟",
                "هل توجد برامج تدخل مستهدفة للطلاب ذوي الأداء المنخفض؟",
                "هل يتم رصد رفاهية الطلاب وسلوكهم وصحتهم وتطورهم الاجتماعي والعاطفي؟",
                "هل تُستخدم بيانات الحضور والسلوك والمشاركة لإبلاغ عملية اتخاذ القرار؟"
            ],
            D: [
                "هل الفصول الدراسية والمعامل والمرافق آمنة ويمكن الوصول إليها ومجهزة بشكل مناسب؟",
                "هل كثافة الطلاب في الفصل متوافقة مع لوائح وزارة التعليم؟",
                "هل المرافق شاملة ويمكن الوصول إليها للمتعلمين ذوي الإعاقة؟",
                "هل خطط الصحة والسلامة والنظافة والطوارئ موثقة ومنفذة ويتم تحديثها بانتظام؟",
                "هل يتم تنفيذ الصيانة الوقائية والتصحيحية وتوثيقها؟",
                "هل توفر المدرسة بيئة تعليمية نظيفة وصحية وداعمة؟"
            ],
            E: [
                "هل يشارك أولياء الأمور بفاعلية في تقييم المدرسة من خلال الاستبيانات والاجتماعات وقنوات الاتصال؟",
                "هل تتاح للمتعلمين فرص منظمة لتقديم تغذية راجعة حول تجربتهم التعليمية؟",
                "هل توجد آليات رسمية لمعالجة مخاوف أولياء الأمور والطلاب؟",
                "هل تُستخدم الشراكات المجتمعية لتعزيز فرص التعلم والتأثير الاجتماعي الإيجابي؟",
                "هل يتم تحليل التغذية الراجعة من أولياء الأمور والمتعلمين والمجتمع واستخدامها للتحسين؟"
            ],
            F: [
                "هل طورت المدرسة خطة تحسين موثقة بناءً على نتائج التقويم الذاتي؟",
                "هل خطة التحسين مدمجة في التخطيط التشغيلي والاستراتيجي للمدرسة؟",
                "هل يتم تنفيذ إجراءات التحسين ومراقبتها ومراجعتها بانتظام؟",
                "هل تتوفر أدلة لإثبات أثر إجراءات التحسين؟",
                "هل توجد تدابير للاستدامة لضمان التحسين المستمر؟",
                "هل يشارك جميع الموظفين في التطوير المهني المستمر المتوافق مع مخرجات التقويم؟"
            ]
        };

        // Render Function
        function renderQuestions(sectionId) {
            const container = document.getElementById(`section-${sectionId.toLowerCase()}-questions`);
            let html = '';
            const questions = questionsData[sectionId];

            questions.forEach((qText, index) => {
                const qNum = index + 1;
                const absoluteIndex = index; // Used for scoring array
                html += `
                <div class="p-6 question-row hover:bg-gray-50 transition" data-section="${sectionId}" data-index="${absoluteIndex}">
                    <p class="font-semibold mb-4 text-lg text-secondary">${qNum}. ${qText}</p>
                    <div class="flex flex-col sm:flex-row sm:items-center justify-between gap-4">
                        <div class="flex gap-2 bg-gray-100 p-2 rounded-lg rating-group">
                            ${[1, 2, 3, 4, 5].map(val => `
                                <button type="button" 
                                    class="w-10 h-10 rounded-full border border-gray-300 hover:border-primary-500 hover:text-primary-600 transition-all font-bold flex items-center justify-center text-gray-500" 
                                    onclick="setScore(this, '${sectionId}', ${val})">${val}</button>
                            `).join('')}
                        </div>
                        <input type="text" placeholder="ملاحظات (اختياري)" class="flex-1 bg-white border border-gray-200 rounded-lg px-4 py-2 focus:outline-none focus:border-primary-500 transition-colors text-sm">
                    </div>
                </div>`;
            });
            container.innerHTML = html;
        }

        // Render All Sections
        ['A', 'B', 'C', 'D', 'E', 'F'].forEach(sec => renderQuestions(sec));

        // State Management
        const scores = {
            A: [], B: [], C: [], D: [], E: [], F: []
        };

        // Score Handler
        window.setScore = function (btn, section, value) {
            // UI Update
            const parent = btn.parentElement;
            parent.querySelectorAll('button').forEach(b => {
                b.classList.remove('bg-primary-500', 'text-white', 'border-primary-500');
                b.classList.add('border-gray-300', 'text-gray-500');
            });
            btn.classList.remove('border-gray-300', 'text-gray-500');
            btn.classList.add('bg-primary-500', 'text-white', 'border-primary-500');

            // Logic Update
            const questionContainer = btn.closest('.question-row');
            const qIndex = parseInt(questionContainer.dataset.index);

            scores[section][qIndex] = value;
            calculateTotals();
        };

        function calculateTotals() {
            let totalScore = 0;
            let totalMax = 0;
            const sections = ['A', 'B', 'C', 'D', 'E', 'F'];

            sections.forEach(sec => {
                const secScores = scores[sec];
                const cleanScores = secScores.filter(n => n); // Count only answered

                // Max Score for this section based on number of questions in questionsData
                const numQuestions = questionsData[sec].length;
                const maxSecScore = numQuestions * 5;

                let currentSecScore = 0;
                for (let i = 0; i < numQuestions; i++) {
                    currentSecScore += (secScores[i] || 0);
                }

                // Update Section Badge
                const sectionEl = document.querySelector(`[data-section="${sec}"]`);
                if (sectionEl) {
                    sectionEl.querySelector('.score-badge').innerText = `${currentSecScore}/${maxSecScore}`;
                }

                // Update Dashboard Breakdown %
                // Avoid division by zero
                const percent = maxSecScore > 0 ? Math.round((currentSecScore / maxSecScore) * 100) : 0;

                const scoreEl = document.getElementById(`score-${sec}`);
                scoreEl.innerText = `${percent}%`;

                // Color coding (Live Section Status)
                if (percent < 50) scoreEl.className = "font-bold text-red-500";
                else if (percent < 80) scoreEl.className = "font-bold text-orange-500";
                else scoreEl.className = "font-bold text-primary-500";

                totalScore += currentSecScore;
                totalMax += maxSecScore;
            });

            // Grand Total
            const totalPercent = totalMax > 0 ? Math.round((totalScore / totalMax) * 100) : 0;
            document.getElementById('total-percent').innerText = `${totalPercent}%`;
            document.getElementById('total-progress').style.width = `${totalPercent}%`;

            // Total Status Logic (Reverted to 3 Levels)
            const statusEl = document.getElementById('total-status');
            if (totalPercent < 50) {
                statusEl.innerText = "حرج - يحتاج تدخل فوري";
                statusEl.className = "px-3 py-1 bg-red-100 rounded-full text-xs font-bold text-red-600";
            } else if (totalPercent < 80) {
                statusEl.innerText = "متطور - يحتاج تحسين";
                statusEl.className = "px-3 py-1 bg-orange-100 rounded-full text-xs font-bold text-orange-600";
            } else {
                statusEl.innerText = "متقدم - جاهزية عالية";
                statusEl.className = "px-3 py-1 bg-primary-100 rounded-full text-xs font-bold text-primary-700";
            }
        }

    </script>
</body>

</html>